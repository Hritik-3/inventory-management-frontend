<div class="inventory-layout">
  <!-- Sidebar -->
  <aside class="inventory-sidebar">
    <h3>INVENTORY<br>DASHBOARD</h3>

    <button (click)="goToStockView()">
      <i class="bi bi-box-seam me-2"></i> Inventory Stocks
    </button>

    <button (click)="manageInventory()">
      <i class="bi bi-gear-fill me-2"></i> Manage Inventory
    </button>

    <button (click)="goToReport()">
      <i class="bi bi-bar-chart-fill me-2"></i> Report
    </button>

    <button (click)="goToAlerts()" class="btn btn-outline-primary">
  <i class="bi bi-calendar-check me-2"></i> Stock Schedule
</button>

 <!-- <button (click)="goToProcurementOrder()" class="btn btn-outline-primary">
  <i class="bi bi-calendar-check me-2"></i> Order Requests
</button> -->


    <button (click)="goToScheduleTracking()">
      <i class="bi bi-clock-history me-2"></i> Schedule Tracking
    </button>

    <!-- <button (click)="goToSchedules()">
      <i class="bi bi-calendar-event-fill me-2"></i> All Schedules
    </button> -->

    <button (click)="updatePassword()">
      <i class="bi bi-key-fill me-2"></i> Update Password
    </button>

    <button (click)="logout()">
      <i class="bi bi-box-arrow-right me-2"></i> Logout
    </button>
  </aside>

  <!-- Main -->
  <div class="inventory-main">
    <!-- Header -->
    <header class="inventory-header">
      <h1>Welcome, {{ username }}</h1>
      <div class="header-icons">
        <!-- Home -->
        <a (click)="onHomeClick()" class="icon-link">
          <img src="assets/home.png" alt="Home" class="icon" />
        </a>

        <!-- Notifications -->
        <div class="notification-container">
          <a (click)="onNotificationClick()" class="icon-link">
            <img src="assets/bell.png" alt="Notifications" class="icon" />
            <span *ngIf="unreadCount > 0" class="badge bg-danger">{{ unreadCount }}</span>
          </a>

          <div class="notification-dropdown" *ngIf="notificationsOpen">
            <div class="alerts-container p-2">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <h5 class="m-0 text-primary">Low Stock Alerts</h5>
                <button class="btn btn-sm btn-outline-primary" (click)="loadAlerts()">Refresh</button>
              </div>

              <div class="table-responsive">
                <table class="table table-sm table-hover table-bordered align-middle">
                  <thead>
                    <tr>
                      <th>Product</th>
                      <th>Current</th>
                      <th>Threshold</th>
                      <th>Status</th>
                      <th>Created</th>
                      <th>Action</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let alert of alerts" [class.table-warning]="alert.status === 'NEW'">
                      <td>{{ alert.productName }}</td>
                      <td class="text-center">{{ alert.currentStock }}</td>
                      <td class="text-center">{{ alert.threshold }}</td>
                      <td>
                        <span class="badge" [ngClass]="{
                          'bg-warning text-dark': alert.status === 'NEW',
                          'bg-success': alert.status === 'ACKNOWLEDGED'
                        }">{{ alert.status }}</span>
                      </td>
                      <td>{{ alert.createdAt | date: 'short' }}</td>
                      <td class="text-center">
                        <button *ngIf="alert.status === 'NEW'" class="btn btn-sm btn-success"
                          (click)="acknowledgeAlert(alert.id, $event)">âœ”
                        </button>
                      </td>
                    </tr>
                    <tr *ngIf="alerts.length === 0">
                      <td colspan="6" class="text-center text-muted">No alerts available</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <!-- Profile -->
        <div class="profile-container" (click)="toggleProfileMenu()">
          <img src="assets/profile.png" alt="Profile" class="icon" />
          <div class="profile-dropdown" *ngIf="profileMenuOpen">
            <button (click)="updateProfile($event)">Update Profile</button>
            <button (click)="logoutFromMenu($event)">Logout</button>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <div class="inventory-content">
      <router-outlet></router-outlet>
    </div>
  </div>
</div>
